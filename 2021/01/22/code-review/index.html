<!DOCTYPE html><html lang="zh-CN"><head><title>团队如何在 Code Review 这件事上进行协作</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
}</script><div><div class="inner"><h2>团队如何在 Code Review 这件事上进行协作</h2><p>Code review 对于软件开发的重要性不言而喻，但笔者今天要说的不是如何给 MR 做 code review，而是要说说团队如何高效地在 code review 这件事上进行协作，笔者在这里分享目前所在的后端团队正在践行的 code review 协作方式。</p>
<a id="more"></a>

<h3 id="Review-MR的时机"><a href="#Review-MR的时机" class="headerlink" title="Review MR的时机"></a>Review MR的时机</h3><ol>
<li>当你提交一个 MR 时，review 一个 MR</li>
<li>编写代码 30 分钟后，review 一个 MR</li>
<li>吃完早中晚餐 review 一个 MR</li>
<li>休息回来 review 一个 MR</li>
<li>review 完一个 MR 后，再来一个</li>
</ol>
<h3 id="了解团队成员在-code-review-这件事上的表现"><a href="#了解团队成员在-code-review-这件事上的表现" class="headerlink" title="了解团队成员在 code review 这件事上的表现"></a>了解团队成员在 code review 这件事上的表现</h3><p>鼓励团队成员都以上述的节奏去协作，这样 MR 提交后都能及时得到 review，进而才能开始后续的代码合并、部署到测试环境、交付测试。如果 MR 的平均等待时间很短，那团队的开发效率就会非常高效。可以使用 GitLab 的统计 API，定期比如每周统计团队成员的 comment 或者 approval 的数量，当团队成员的 comment 或者 approval 数量都比较均衡时，那就算是一个健康的状态。比如一下这个匿名的统计就不是一个很好的状态，理想的状态是每个人 comments 数量都在20上下，approvals 也都是在20上下：</p>
<pre><code class="jsx">Weekly MR Reviewers
- Mike:       comments: 39, approvals: 32
- Alex:   comments: 35, approvals: 23
- Dave:     comments: 27, approvals: 28
- George:      comments: 26, approvals: 18
- Myron:      comments: 15, approvals: 28
- Justin:    comments:  8, approvals:  7
- Peter:        comments:  7, approvals:  8
- Joe:      comments:  1, approvals:  2</code></pre>
<p>此外，除非是紧急修复的 MR，否则一般的 MR 都应该经得起等待，每个人的工作不应该被 MR 打断。</p>
<h3 id="如何让你的MR加速得到-approval"><a href="#如何让你的MR加速得到-approval" class="headerlink" title="如何让你的MR加速得到 approval"></a>如何让你的MR加速得到 approval</h3><ol>
<li>贴出你的 MR 要完成的任务，可以是 Jira task、GitLab issue等的链接</li>
<li>解释清楚你是如何实现的</li>
<li>解释你为你的代码做了何种测试，贴出测试结果</li>
<li>缩小 MR 的 scope，不要一下子来个大的，否则别人会对你的 MR 产生恐惧</li>
<li>如果 MR 的 thread 对话开始多起来，立刻开始一个视频会议或者面对面沟通，快速结束对话</li>
<li>写 clean code</li>
</ol>
</div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '');</script></html>